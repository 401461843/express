<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./public/css/reset.css">
    <link rel="stylesheet" href="./public/css/index.css">
</head>
<body>
    <button class="cj" style="display: block;margin: 0 auto;margin-top: .4rem;">抽奖</button>
    <div class="jx" style="width: 2rem;margin: 0 auto;margin-bottom: .5rem;text-align: center;margin-top: .4rem;">您中的奖是！</div>
    <div style="text-align: center;"> 输入手机号领奖：<input type="text" class="tell"></div>
    <div style="text-align: center;margin-bottom: .4rem;">    
        <button class="tj" style="display: inline-block;margin: 0 auto;margin-top: .4rem;">提交</button>
        <button class="fq" style="display: inline-block;margin: 0 auto">放弃</button>

   </div>
   <div class="baner">
   </div>
   <div class="menu">
        <div class="menu-item" >
            <div class="sign">新</div>
            <div class="tit">新品首发</div>
        </div>
        <div class="menu-item" >
            <div class="sign">团</div>
            <div class="tit">新品首发</div>
        </div>
        <div class="menu-item" >
            <div class="sign">N</div>
            <div class="tit">新品首发</div>
        </div>
        <div class="menu-item" >
            <div class="sign">礼</div>
            <div class="tit">新品首发</div>
        </div>
        <div class="menu-item" >
            <div class="sign">pick</div>
            <div class="tit">新品首发</div>
        </div>
   </div>
   <div class="content">
       <div class="i-content-sf">
           <div class="bt">宠爱季新品首发，限量秒杀</div>
           <div class="gm"></div>
           <div class="tab">
               <div class="tab-m">
                   <div class="tab-m-i active" id="0">个人用品</div>
                   <div class="tab-m-i" id="1">婚纱摄影</div>
                   <div class="tab-m-i" id="2">美妆个护</div>
                   <div class="tab-m-i" id="3">零食快消</div>
               </div>
               <div class="tab-i">
                    <div class="tab-i-i">
                        <div class="t"></div>
                        <div class="n">品牌A新品首发价</div>
                        <div class="p">¥5880抢</div>
                    </div>
                    <div class="tab-i-i">
                        <div class="t"></div>
                        <div class="n">品牌A新品首发价</div>
                        <div class="p">¥5880抢</div>
                    </div>
               </div>
           </div>
       </div>
       <div class="i-content-sf">
        <div class="bt">宠爱季独家优惠，只为宠你</div>
        <div class="yh-content">
            
        </div>
    </div>
   </div>
   


</body>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="./public/javascripts/rem.js"></script>
<script>
    window.tabArr =[
        [
            {
                src:'./1.png',
                name:'品牌A新品首发价',
                price:'¥5880抢'
            },
            {
                src:'./2.png',
                name:'品牌A新品首发价',
                price:'¥5880抢'
            }
        ],[
            {
                src:'./1.png',
                name:'品牌B新品首发价',
                price:'¥5880抢'
            },
            {
                src:'./2.png',
                name:'品牌B新品首发价',
                price:'¥5880抢'
            }
        ],[
            {
                src:'./1.png',
                name:'品牌C新品首发价',
                price:'¥5880抢'
            },
            {
                src:'./2.png',
                name:'品牌C新品首发价',
                price:'¥5880抢'
            }
        ],[
            {
                src:'./1.png',
                name:'品牌D新品首发价',
                price:'¥5880抢'
            },
            {
                src:'./2.png',
                name:'品牌D新品首发价',
                price:'¥5880抢'
            }
        ]
       
    ]
    window.prize= ''

    $('body').on('click','.tab-m-i',function () {
    
        var index = Number($(this).attr('id'))
        $('.tab-m-i').removeClass('active')
        $(this).addClass('active')
        $.each($('.tab-i'),function (i,val) {
            $(val).find('.n').text(tabArr[index][i]['name'])
            $(val).find('.p').text(tabArr[index][i]['price'])
        })
    }).on('click','.cj',function () { 
        
            
            $.ajax({
                //请求方式
                type : "post",
                //请求地址
                url : "/api/luckDraw",
                //数据，json字符串
                data:{'mobile':'17621611037'},
                dataType: 'json',
                //请求成功
                success : function(res) {
                    $('.jx').text("恭喜你中了"+res.prize)
                    prize=res.prize
                    // console.log(res.prize);
                },
                //请求失败，包含具体的错误信息
                error : function(e){
                    console.log(e.status);
                    console.log(e.responseText);
                }
            });
        

    }).on('click','.tj',function () { 
        var param ={
            tell:$('.tell').val(),
            prize:prize
        }
        $.ajax({
                //请求方式
                type : "post",
                //请求地址
                url : "/api/submit",
                //数据，json字符串
                data:param,
                dataType: 'json',
                //请求成功
                success : function(res) {
                
                },
                //请求失败，包含具体的错误信息
                error : function(e){
                    console.log(e.status);
                    console.log(e.responseText);
                }
            });
    })
</script>
</html>