<!DOCTYPE html>
<html lang="en">
<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ffbbabff928b8ef748056bddc55a79aa";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>1314白色情人节</title>
    <link rel="stylesheet" href="../public/css/reset.css">
    <link rel="stylesheet" href="../public/css/1314.css">
    <link rel="stylesheet" href="../public/css/swiper.css">
</head>

<body>
    <div class="wrap">
        <div class="baner">
            <!-- <div class="cd">
                <a href="#ppzq">
                    <img src="../public/images/1314/bar1.png" alt="">
                </a>
                <a href="#djyh">
                    <img src="../public/images/1314/bar2.png" alt="">
                </a>
                <a href="#zczb">
                    <img src="../public/images/1314/bar3.png" alt="">
                </a>
                <a href="#cafl">
                    <img src="../public/images/1314/bar4.png" alt="">
                </a>
            </div> -->
        </div>
        <div class="box_wrap box_wrap1">
            <div class="tit_pic">
                <img src="../public/images/1314/zhb.png" alt="">
            </div>
            <div class="cont_box">
                <div class="border">
                    <div class="zb_wrap">
                        <div class="zb_t">
                            <img src="../public/images/1314/banner.jpg">
                        </div>
                        <div class="zb_b">
                            <div class="list">
                                <img src="../public/images/1314/banner.jpg">
                            </div>
                            <div class="list">
                                <img src="../public/images/1314/banner.jpg">
                            </div>
                            <div class="list">
                                <img src="../public/images/1314/banner.jpg">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper_wrap1">
            <div class="swiper-container swiper-container1">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" style="width: 100%;">
                        <img src="../public/images/1314/bar1.png">
                        <div class="text"></div>
                    </div>
                    <div class="swiper-slide" style="width: 100%;">
                        <img src="../public/images/1314/bar2.png" alt="">
                        <div class="text"></div>
                    </div>
                    <div class="swiper-slide" style="width: 100%;">
                        <img src="../public/images/1314/bar3.png" alt="">
                        <div class="text"></div>
                    </div>
                    <div class="swiper-slide" style="width: 100%;">
                        <img src="../public/images/1314/bar4.png" alt="">
                        <div class="text"></div>
                    </div>
                </div>
            </div>
            <div class="swiper-pagination"></div>
        </div>
        <!--
        <div class="box1_wrap">
            <div class="cont">
                <div class="pic"></div>
                <div class="text">
                    <div class="tit1">分享1位微信好友立即领取 老凤祥麻布袋便携餐具一份</div>
                    <div class="tit2">仅限100份先到先得</div>
                    <div class="btn">立即分享</div>
                </div>
            </div>
        </div>
        <div class="game_wrap">
            <div class="rule">规则攻略</div>
            <div class="cont">
                <div class="lists" id="gameList">
                    -->
                    <!-- <div class="list"></div> -->
                    <!--
                </div>
                <div class="mask" style="display:none">
                    <div class="start"></div>
                </div>
                <div class="gameTime">12</div>
            </div>
        </div>
        <div class="box_wrap box_wrap2">
            <div class="tit_pic">
                <img src="../public/images/1314/fl.png" alt="">
            </div>
            <div class="cont_box">
                <div class="border">
                    <div class="fl_wrap">
                        <div class="pic"></div>
                        <div class="tit">深层清洁+营养补给+补水导入</div>
                        <div class="btn">立即前往</div>
                    </div>
                    <div class="swiper_wrap2">
                        <div class="swiper-container swiper-container2">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide" style="width: 100%;">
                                    <div class="pic"></div>
                                    <div class="cont">
                                        <div class="tit">深层清洁+营养补给+补水导入</div>
                                        <div class="btn">立即前往</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-button-next"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box_wrap box_wrap3">
            <div class="tit_pic">
                <img src="../public/images/1314/yzh.png" alt="">
            </div>
            <div class="cont_box">
                <div class="border">
                    <div class="yzh_wrap">
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box_wrap box_wrap4">
            <div class="tit_pic">
                <img src="../public/images/1314/xy.png" alt="">
            </div>
            <div class="cont_box">
                <div class="border">
                    <div class="yzh_wrap">
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box_wrap box_wrap5">
            <div class="tit_pic">
                <img src="../public/images/1314/jk.png" alt="">
            </div>
            <div class="cont_box">
                <div class="border">
                    <div class="yzh_wrap">
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box_wrap box_wrap6">
            <div class="tit_pic">
                <img src="../public/images/1314/cf.png" alt="">
            </div>
            <div class="cont_box">
                <div class="border">
                    <div class="yzh_wrap">
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                        <div class="list">
                            <div class="tit">青阳双眼皮</div>
                            <div class="pic"></div>
                            <div class="btn">点击查看</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        -->
        <div class="footer_wrap">
            <div class="tit"></div>
            <div class="lists">
                <div class="list"></div>
                <div class="list"></div>
                <div class="list"></div>
                <div class="list"></div>
                <div class="list"></div>
                <div class="list"></div>
                <div class="list"></div>
                <div class="list"></div>
            </div>
        </div>
        <div class="gameTip_wrap">
            <div class="ss">
                <img src="../public/images/yxgz.png">
                <div class="gameTip_close">×</div>
            </div>
        </div>
        <div class="mzsm">
            <div class="mznr">
                <div style="text-align: center;font-size: .3rem;margin-bottom: .2rem;"> 活动参与方式及规则</div>
                <div class="mzegb">×</div>
                参与方式： <br>
                1.用户进入活动页面后，按照页面提示完成互动，即可参与抽奖。<br>
                2.同一用户最多只可获奖一次（详见活动须知）。<br>
                3.中奖用户需提交准确无误的获奖品信息（姓名、联系电话等），以确保奖品正确核销。

                活动时间：<br>
                2020年8月23日-2020年8月30日<br>

                领券说明：<br>
                奖品共分为五个奖项：<br>
                小度在家X8 <br>
                小度智能音箱play <br>
                趴趴熊睡枕 <br>
                星座度熊公仔 <br>
                博洋冰丝凉席 <br>
                老凤祥口罩夹 <br>
                克徕帝便携珠宝箱 <br>
                *(奖品款式，颜色随机，邮寄地址以中奖用户在活动页面填写的信息为准，一经提交无法更改 ），不接受退换。<br>

                奖品领取：<br>
                1.获奖后，请按照页面提示填写完整的获奖信息，并于10个工作日内去相关的领取<br>
                2.若由于用户未提供准确信息致使无法将奖品成功寄送给用户的，将视为中奖用户自动放弃奖品及兑奖资格。<br>

                活动须知：<br>
                1. 请在参与本活动之前，仔细阅读本活动参与方式及规则，您参与本活动即表示您愿意遵守与本活动有关的以下规则。<br>
                2. 同一用户（同一设备，同一手机号，同一网络IP，满足前述任一条件均视为同一用户）最多只可获奖一次。<br>
                3. 此活动相关推广活动页面可被转发。 <br>
                4. 限时抢奖品一经领取，不可退换，不可兑换现金，不可对外出售。<br>
                5. 用户的中奖纪录以主办方保存的系统后台数据库中的记录为准。<br>
                6. 主办方工作人员与相关代理商不得参与本次活动。<br>
                7. 获奖者在领取、使用奖品过程中发生损失或损害，除非该等损失或损害系因主办方过失导致的，否则主办方不承担任何责任。<br>
                8. 若发现用户在活动参加过程中有任何舞弊、欺诈或违法行为，主办方有权在不经事先通知的前提下取消其获奖资格。<br>
                9. 因网络、通讯线路故障等非主办方原因而导致系统误送中奖通知或用户无法获取奖品，或遭受其他权利损失，主办方不承担任何责任。<br>
                10. 本活动仅为用户提供网络活动式平台体验服务，用户不得利用相关网站发布侮辱与攻击性语言，不得侵犯他人隐私，不得发布任何违法内容，任何由用户发布、参与、传播互动内容而导致的法律责任，由用户自行承担。<br>
                11. 中奖者提供虚假兑奖信息或转发兑奖信息、逾期兑奖等情形，皆视为中奖者放弃中奖资格及由此引申的权利。<br>
                12. 最终解释权归百度上海分公司所有<br>
                13. 如有问题可联系客服：17521276113<br>
            </div>
        </div>
        <div class="result_wrap">
            <div class="form_wrap">
                <div class="form_tit">恭喜你获得小都音响</div>
                <div class="xxk">
                    <input type="text" class="xm" placeholder="姓名">
                    <input type="text" class="tell" placeholder="电话">
                    <div style="width: 100%;" class="tj">提交</div>
                </div>
                <p class="sm"></p>
            </div>
            <div class="again">
                <div style="width: 64%;" class="restart">再来一次</div>
            </div>
            <div class="close" style="top: 3rem;left: 88%;">×</div>
        </div>
        <div class="fxts">
            <img src="../public/images/fxtb.png" alt="">
        </div>
    </div>
</body>
<script src="../public/javascripts/jquery-3.3.1.min.js"></script>
<script src="../public/javascripts/rem.js"></script>
<script src="../public/javascripts/swiper.min.js"> </script>

<script>
    class love1314 {
        constructor() {
            this.prizeList = [{
                    imgPath: '../public/images/x-0.png',
                    id: '0',
                },
                {
                    imgPath: '../public/images/x-1.png',
                    id: '1',
                },
                {
                    imgPath: '../public/images/x-2.png',
                    id: '2',
                },
                {
                    imgPath: '../public/images/x-3.png',
                    id: '3',
                },
                {
                    imgPath: '../public/images/x-4.png',
                    id: '4',
                },
                {
                    imgPath: '../public/images/x-5.png',
                    id: '5',
                },
                {
                    imgPath: '../public/images/x-6.png',
                    id: '6',
                },
                {
                    imgPath: '../public/images/x-7.png',
                    id: '7',
                },
            ];
        }
        swiper1() {
            new Swiper('.swiper-container1', {
                pagination: {
                    el: '.swiper-pagination',
                },
                autoplay: {
                    delay: 2000
                },
                loop: true,
            })
        }
        swiper2() {
            new Swiper('.swiper-container2', {
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                loop: true,
            })
        }
        randomilize(array, num) {
            if (num % 2 != 0 && num != 0) return;
            let l = num / 2;
            let arr = [...array]
            let newArr = [];
            for (let i = 0; i < l; i++) {
                if (arr.length == 0) {
                    arr = [...array]
                }
                let index = Math.floor(Math.random() * arr.length)
                newArr[i] = arr[index]
                arr.splice(index, 1)
            }
            return newArr
        }
        prizeInit(num) {
            let l = num / 2;
            let list1 = this.randomilize(this.prizeList, num)
            let list2 = this.randomilize(list1, num)
            let list = list1.concat(list2)
            let str = ''
            list.map(function (val, index) {
                let w = document.documentElement.clientWidth / 750 * 136
                let h = document.documentElement.clientHeight / 750 * 136
                let html = ''
                for (let i = 0; i < 4; i++) {
                    html += `<div class="clipped" sign=${val.id} style="clip: rect(${i*w/4}px,${(i+1)*w/4}px,${(i+1)*w/4}px,${i*w/4}px)">
                        <img src="${val.imgPath}" style="height: 100%;width: 100%;" alt="">
                    </div>`
                }

                str += `<div class="list" sign='${val.id}'>
                            <div class="content">
                                <img src="${val.imgPath}" style="height: 100%;width: 100%;" alt="">
                            </div>
                            ${html}
                        </div>`
            })
            document.getElementById('gameList').innerHTML = str
        }
        luckDrawZy() {
            $.ajax({
                type: "post",
                url: "/api/luckDrawZy",
                dataType: 'json',
                success: function (res) {
                    // $('.jx').text("恭喜你中了"+res.prize)
                    // prize=res.prize
                    console.log();
                    var str = ''
                    setTimeout(function (param) {
                        xxljx = res.prize
                        if (res.prize == 'kldzbx') {
                            str =
                                '1.顾客凭线上预约码 到店可领取价值399元便携珠宝箱一件（30天内有效）<br>2.线上预约链接:<a href="https://m.crd.cn/reservation/?source=kaipin|H5">https://m.crd.cn/reservation/?source=kaipin|H5</a>'
                            $('.sm').css({
                                'left': '18%'
                            })
                        } else if (res.prize == 'kzj') {
                            str =
                                '1.凭手机号进店即可免费老凤祥口罩夹一个<br>2.上海老凤祥豫园分号黄浦区丽水路58-88号<br>3.每人仅限领取同类产品一次'
                            $('.sm').css({
                                'bottom': '.5rem'
                            })
                        } else {
                            str = '1.请填写完整的获奖信息，活动结束后会有工作人员索要邮寄地址<br>2.活动结束后我们将于15个工作日内将奖品邮寄给您'
                            $('.sm').css({
                                'left': '18%'
                            })
                        }
                        $('.form_tit').text('恭喜你获得' + map[res.prize])
                        $('.sm').html(str)

                        $('.form_wrap').fadeIn()
                        $('.result_wrap').fadeIn()
                        count = 1
                        xcd = 0
                        timer1 = null
                        gameTime = 12
                        $('.gameTime').text(gameTime)
                        $('.mask').removeClass('hide')
                        init()

                    }, 1000)
                },
                error: function (e) {
                    console.log(e.status);
                    console.log(e.responseText);
                }
            });
        }
    }
    let my_love1314 = new love1314();
    my_love1314.swiper1()
    my_love1314.swiper2()
    my_love1314.prizeInit(16)


    var gameTime = 12 // 游戏剩余时间
    var count = 1 //
    var xcd = 0 // 消除次数
    var timer1 = null // 秒表
    var timer2 = null // 规则提示时间
    $('body')
        .on('click', '.rule', function (param) {
            $('.mzsm').fadeIn()
        })
        .on('click', '.mzegb', function (param) {
            $('.mzsm').fadeOut()
        })
        .on('click', '.start', function () {
            $('.gameTip_wrap').fadeIn()
            clearTimeout(timer2)
            timer2 = setTimeout(() => {
                $('.gameTip_wrap').fadeOut()
                $('.mask').hide()
                clearInterval(timer1)
                timer1 = setInterval(function (param) {
                    gameTime--;
                    if (gameTime == -1) {
                        clearInterval(timer1)
                        $('.again').fadeIn()
                        $('.result_wrap').fadeIn()
                    } else {
                        $('.gameTime').text(gameTime)
                    }
                }, 1000)
            }, 3000);
        })
        .on('click', '.gameTip_close', function () {
            $('.gameTip_wrap').fadeOut()
            $('.mask').hide()
            clearTimeout(timer2)
            clearInterval(timer1)
            timer1 = setInterval(function (param) {
                gameTime--;
                if (gameTime == -1) {
                    clearInterval(timer1)
                    $('.again').fadeIn()
                    $('.result_wrap').fadeIn()
                } else {
                    $('.gameTime').text(gameTime)
                }
            }, 1000)
        })
        .on('click', '.restart', function () {
            count = 1
            xcd = 0
            timer1 = null
            gameTime = 12
            $('.gameTime').text(gameTime)
            $('.mask').show()
            $('.again').hide()
            $('.result_wrap').hide()
            my_love1314.prizeInit(16)
        })
        .on('click', '.close', function () {
            count = 1
            xcd = 0
            timer1 = null
            gameTime = 12
            $('.gameTime').text(gameTime)
            $('.mask').show()
            $('.again').hide()
            $('.result_wrap').hide()
            my_love1314.prizeInit(16)
        })
        .on('click', ' #gameList .list', function () {
            if (gameTime > 0) {
                var _this = this
                var timer = null;
                if ($(this).hasClass('sign')) return;
                $(this).addClass('sign')
                if (count < 3) {
                    $(this).addClass('active')
                    count++;
                }
                if (count == 3) {
                    if ($($('.active')[0]).attr('sign') != $($('.active')[1]).attr('sign')) {
                        clearTimeout(timer)
                        $('.active').addClass('shake')
                        $('.list').removeClass('active')
                        $('.list').removeClass('sign')
                        timer = setTimeout(function (param) {
                            $('.list').removeClass('shake')
                        }, 1000)
                        count = 1
                    } else {
                        $.each($('.active'), function (index, val) {
                            $(val).find('.content').css({
                                'display': 'none'
                            });
                            $(val).find('div:not(.content)').each(function () {
                                var v = rand(70, 50),
                                    angle = rand(0, 89),
                                    theta = (angle * Math.PI) / 180,
                                    g = -9.8;
                                var self = $(this);
                                var t = 0, z, r, nx, ny, totalt = 15;
                                var negate = [1, -1, 0],
                                    direction = negate[Math.floor(Math.random() * negate.length)];
                                var newColor = 'rgb(' + rand(235, 275) + ', ' + rand(235, 275) + ', ' + rand(235, 275) + ')';
                                var transform = 'scale(' + rand(0.9, 1.1) + ') skew(' + rand(-5, 10) + 'deg) rotateZ(' + rand(30, 5) + 'deg)'
                                $(this).css({'transform': transform,'background': newColor});
                                z = setInterval(function () {
                                    var ux = (Math.cos(theta) * v) * direction;
                                    var uy = (Math.sin(theta) * v) - ((-g) * t);
                                    nx = (ux * t);
                                    ny = (uy * t) + (0.5 * (g) * Math.pow(t, 2));
                                    $(self).css({
                                        'bottom': (ny) + 'px',
                                        'left': (nx) + 'px'
                                    });
                                    t = t + 0.10;
                                    if (t > totalt) {
                                        $(val).css({
                                            'top': '-1000px',
                                            'transition': 'none'
                                        });
                                        $(self).css({
                                            'left': '0',
                                            'bottom': '0',
                                            'opacity': '1',
                                            'transition': 'none',
                                            'transform': 'none'
                                        });
                                        clearInterval(z);
                                    }
                                }, 10);
                            });
                        })
                        xcd++
                        count = 1
                        $('.list').removeClass('active')
                        $('.list').removeClass('sign')

                        if (xcd == 8) {
                            clearInterval(timer1)
                            $('.result_wrap').fadeIn()
                            $('.form_wrap').fadeIn()
                            // this.luckDrawZy()
                        }
                    }
                }
                console.log(count)
            }
        })
        function rand(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
</script>

</html>